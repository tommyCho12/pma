<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main}">

<head th:replace="layouts :: header">

<body>
<nav th:replace="layouts :: navbar"></nav>

<div layout:fragment="content">
    <div class="container mt-4">

        <!-- Back Button -->
        <div class="back-button">
            <a th:href="@{/documents}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Back to Documents
            </a>
        </div>

        <!-- Document Header -->
        <div class="document-header">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h1 class="mb-2" th:text="${document.title}">Document Title</h1>
                    <p class="mb-0">
                        <span class="badge badge-custom bg-light text-dark">
                            ID: <code th:text="${document.id}">DOC-001</code>
                        </span>
                    </p>
                </div>
                <div>
                    <!-- Tags (if you add them) -->
<!--                    <div th:if="${document.tags != null and !document.tags.isEmpty()}">-->
<!--                        <span th:each="tag : ${document.tags}"-->
<!--                              class="badge bg-white text-dark me-1"-->
<!--                              th:text="${tag}">Tag</span>-->
<!--                    </div>-->
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Main Content Area -->
            <div class="col-lg-8">
                <!-- Document Content -->
                <div class="document-content">
                    <h4 class="mb-3 text-muted">Content</h4>
                    <div th:utext="${#strings.replace(#strings.escapeXml(document.content), '&#10\;', '<br/>')}">
                        Document content goes here...
                    </div>

                    <!-- Empty state if no content -->
                    <div th:if="${document.content == null or document.content.isEmpty()}"
                         class="text-center text-muted py-5">
                        <i class="bi bi-file-earmark-text" style="font-size: 3rem;"></i>
                        <p class="mt-3">This document has no content yet.</p>
                    </div>
                </div>
            </div>

            <!-- Sidebar with Metadata -->
            <div class="col-lg-4">
                <!-- Metadata Card -->
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-info-circle"></i> Document Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="metadata-item">
                            <span class="metadata-label">üìÑ Document ID:</span>
                            <span class="metadata-value">
                                <code th:text="${document.id}">DOC-001</code>
                            </span>
                        </div>

                        <div class="metadata-item">
                            <span class="metadata-label">üìù Title:</span>
                            <span class="metadata-value" th:text="${document.title}">Title</span>
                        </div>

<!--                        <div class="metadata-item" th:if="${document.createdAt != null}">-->
<!--                            <span class="metadata-label">üìÖ Created:</span>-->
<!--                            <span class="metadata-value"-->
<!--                                  th:text="${#temporals.format(document.createdAt, 'dd MMM yyyy HH:mm')}">-->
<!--                                01 Jan 2025 12:00-->
<!--                            </span>-->
<!--                        </div>-->

<!--                        <div class="metadata-item" th:if="${document.updatedAt != null}">-->
<!--                            <span class="metadata-label">üîÑ Last Updated:</span>-->
<!--                            <span class="metadata-value"-->
<!--                                  th:text="${#temporals.format(document.updatedAt, 'dd MMM yyyy HH:mm')}">-->
<!--                                15 Jan 2025 14:30-->
<!--                            </span>-->
<!--                        </div>-->

<!--                        <div class="metadata-item" th:if="${document.author != null}">-->
<!--                            <span class="metadata-label">üë§ Author:</span>-->
<!--                            <span class="metadata-value" th:text="${document.author}">Unknown</span>-->
<!--                        </div>-->

<!--                        <div class="metadata-item" th:if="${document.category != null}">-->
<!--                            <span class="metadata-label">üè∑Ô∏è Category:</span>-->
<!--                            <span class="metadata-value">-->
<!--                                <span class="badge bg-info" th:text="${document.category}">General</span>-->
<!--                            </span>-->
<!--                        </div>-->

                        <div class="metadata-item">
                            <span class="metadata-label">üìä Word Count:</span>
                            <span class="metadata-value">
                                <span th:text="${#strings.isEmpty(document.content) ? 0 : #strings.length(#strings.arraySplit(document.content, ' '))}">0</span> words
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats Card (Optional) -->
                <div class="card mt-3">
                    <div class="card-header bg-success text-white">
                        <h6 class="mb-0"><i class="bi bi-graph-up"></i> Statistics</h6>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Lines:</span>
                            <strong
                                    th:text="${#strings.isEmpty(document.content) ? 0 : #strings.length(#strings.arraySplit(document.content, '&#10\;'))}">0</strong>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Paragraphs:</span>
                            <strong
                                    th:text="${#strings.isEmpty(document.content) ? 0 : #strings.length(#strings.arraySplit(document.content, '&#10\;&#10\;'))}">0</strong>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Est. Reading Time:</span>
                            <strong>
                                <span th:text="${#strings.isEmpty(document.content) ? 0 : T(java.lang.Math).ceil(#strings.length(#strings.arraySplit(document.content, ' ')) / 200.0)}">0</span> min
                            </strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <a th:href="@{/documents/update(id=${document.id})}" class="btn btn-primary">
                <i class="bi bi-pencil"></i> Edit Document
            </a>

            <button onclick="window.print()" class="btn btn-secondary">
                <i class="bi bi-printer"></i> Print
            </button>

            <button onclick="copyToClipboard()" class="btn btn-info">
                <i class="bi bi-clipboard"></i> Copy Content
            </button>

            <button onclick="shareDocument()" class="btn btn-success">
                <i class="bi bi-share"></i> Share
            </button>

            <a th:href="@{/documents/delete(id=${document.id})}"
               class="btn btn-danger"
               onclick="return confirm('Are you sure you want to delete this document?')">
                <i class="bi bi-trash"></i> Delete
            </a>
        </div>

    </div>


<div th:replace="layouts :: footer"></div>
</div>
</body>

</html>